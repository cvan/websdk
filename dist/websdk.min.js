!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("websdk",[],n):"object"==typeof exports?exports.websdk=n():e.websdk=n()}(this,function(){return function(e){function n(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var s={};return n.m=e,n.c=s,n.i=function(e){return e},n.d=function(e,s,t){n.o(e,s)||Object.defineProperty(e,s,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(s,"a",s),s},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=2)}([function(e,n,s){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.fetch=n.emit=void 0;var i=arguments,a=s(3),o=t(a),r=s(0),c=t(r),u=function(e,n){if("string"==typeof e?e={type:e}:(e=e||{},"title"in e&&(e.type=e.title,delete e.title),"name"in e&&(e.type=e.name,delete e.name)),e.target=e.target||document.body||document.documentElement,e.bubbles=!("bubbles"in e)||e.bubbles,e.detail=n||e.detail||{},Object.keys(e).forEach(function(n){"detail"!==n&&(e.detail[n]=e[n])}),"bubble"in e.detail||(e.detail.bubbles=!0),!("CustomEvent"in window))throw new Error("`CustomEvent` support is required");var s=new CustomEvent("websdk."+e.type,e.detail);return Object.keys(e.detail).forEach(function(n){"type"!==n&&"target"!==n&&"bubbles"!==n&&(s[n]=e.detail[n])}),e.target.dispatchEvent(s),s},m=function(e){return"string"==typeof e?(e=i[1]||{},e.url=i[0]):e=e||{},new Promise(function(n,s){var t=c.default.getExtName(e.url);e.method="method"in e?e.method:"get",e.json="json"in e?e.json:"json"===t||"webmanifest"===t||"manifest"===t;var i=new XMLHttpRequest;i.open(e.method,e.url,"true"),i.addEventListener("load",function(){var s={};if(e.json)try{s=JSON.parse(i.responseText||"{}")}catch(e){}n(s)}),i.addEventListener("error",s),i.send(e.data)})};e.exports.getExtName=function(e){return e=(e||"").trim().replace(/([?#].+)$/g,"").replace(/\s/g,""),e.substring(e.lastIndexOf(".")+1)},e.exports.slugify=function(e){return(e||"").trim().replace(/\s+/," ").replace(/[^a-z0-9]+/gi,"-").toLowerCase()};var p=e.exports.getMetaTag=function(e,n,s){if(!e)throw new Error("Expected an `attributeName` argument for `getMetaTag`");return"string"==typeof n&&(s=(s||document).querySelector(n)),s?s.getAttribute(e):""},d=e.exports.getMetaTagContent=function(e,n){return p("content",e,n)},l=e.exports.getMetaTagHref=function(e,n){return p("href",e,n)};e.exports.getManifestFallback=function(){var e=d('meta[property="og:site_name"]'),n=d('meta[property="og:title"]'),s=d('meta[property="og:url"]'),t=d('meta[property="og:description"]'),i=d('meta[property="og:image"]'),a=d('meta[property="og:site_name"]'),r=d('meta[name="twitter:app:name"], meta[name="twitter:app:name:iphone"], meta[name="twitter:app:name:ipad"], meta[name="twitter:app:name:googleplay"]'),c=d('meta[name="twitter:title"]'),u=d('meta[name="twitter:url"]'),m=d('meta[property="og:description"]'),p=d('meta[name="twitter:image"]'),f=d('meta[name="apple-mobile-web-app-title"], meta[name="application-name"]'),x=d('meta[name="description"]')||t||m,h=d('link[rel="canonical"], meta[name="msapplication-starturl"], meta[name="start_url"]')||u||s||window.location.href,v=(void 0).getMetaTagContent('meta[name="theme_color"], meta[name="msapplication-TileColor"], meta[name="apple-mobile-web-app-status-bar-style"]'),g=Array.prototype.map.call(document.querySelectorAll('link[rel~="icon"], link[rel~="favicon"], link[rel~="apple-touch-icon"]'),l);i&&g.push(i),p&&g.push(p);var b={};b.name=f||e||a||r||n||c||document.title||"",b.short_name=r||b.name,b.description=t||m||x,b.start_url=h,v&&(b.theme_color=v),b.start_url=h;var w={};return b.icons=[],g.forEach(function(e){!e||!e.href||e.href in w||(w[e.href]=!0,b.icons.push({src:e.href,sizes:e.sizes||"",type:o.default.lookup(e.href)}))}),b},n.emit=u,n.fetch=m},function(e,n){e.exports={name:"websdk",libraryName:"websdk",version:"0.1.0",description:"The Universal SDK for Web Applications",main:"dist/websdk.js",license:"CC0-1.0",author:"Christopher Van Wiemeersch <hearcomestreble@gmail.com>",bugs:{url:"https://github.com/cvan/websdk/issues"},homepage:"https://github.com/cvan/websdk",repository:{type:"git",url:"https://github.com/cvan/navigator-web.git"},keywords:["navigatorweb","navigator-web","navigator","web","browser","webpack","browserify","es6","es5","library","universal","umd","amd","commonjs","babel"],semistandard:{ignore:["dist","**/vendor/**"]},devDependencies:{babel:"^6.23.0","babel-core":"^6.24.0","babel-eslint":"^7.2.1","babel-loader":"^6.4.1","babel-plugin-add-module-exports":"^0.2.1","babel-preset-es2015":"^6.24.0",chai:"^3.5.0",eslint:"^3.19.0","eslint-loader":"^1.7.1",mocha:"^3.2.0",semistandard:"^10.0.0",snazzy:"^6.0.0",webpack:"^2.3.3",yargs:"^7.0.2"},scripts:{start:"npm run dev",dev:"webpack --progress --colors --watch --env dev",test:"mocha --compilers js:babel-core/register --colors ./test/*.spec.js","test:watch":"mocha --compilers js:babel-core/register --colors --watch ./test/*.spec.js",build:"webpack --env build",lint:"semistandard -v | snazzy || true","lint:fix":"semistandard -v --fix | snazzy || true",dist:"npm run dist:max && npm run dist:min","dist:max":"webpack --env dist-max","dist:min":"webpack --env dist-min"}}},function(e,n,s){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,n){for(var s=0;s<n.length;s++){var t=n[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,s,t){return s&&e(n.prototype,s),t&&e(n,t),n}}(),o=s(1),r=t(o),c=s(0),u=t(c),m=function(){function e(n){i(this,e),n=n||{},n.name=n.name||n.appName||n.title||n.titleName,this._opts=n,this._navigator=n.navigator||navigator,this._window=n.window||window,this._document=n.document||document,this._productName="productName"in n?n.productName:r.default.productName||this.name,this._name=n.name||this._document.title,this._slug="slug"in n?n.slug:u.default.slugify(this._name),this._manifest="manifest"in n?n.manifest:null,this._fakeManifest=("fakeManifest"in n?n.fakeManifest:null)||u.default.getManifestFallback(),this._requireManifestTag="requireManifestTag"in n&&n.requireManifestTag,this._manifestURL=n.manifestURL||this.manifestURL,this._documentURL=n.documentURL||this._document.location.href}return a(e,[{key:"manifestRefresh",value:function(e,n){var s=this;return e=e||s._manifestURL||s._documentURL,s.manifestFetch(e).then(function(e){s.manifest=e}).catch(function(e){console.warn("Warning:",e),s._manifest=null})}},{key:"manifestFetch",value:function(e,n){var s=this;return e=e||s._manifestURL||s._documentURL,new Promise(function(t,i){return s.fetch(e).then(function(e){if(!e||!Object.keys(e).length)return void i(new Error("Invalid manifest"));t(e)}).catch(function(a){if(n)return void t(s.manifestFetch("https://fetchmanifest.org/manifest?url="+encodeURIComponent(e),!0));i(a)})})}},{key:"fetch",value:function(e,n){return u.default.fetch(e,n)}},{key:"emit",value:function(e,n){return u.default.emit(e,n)}},{key:"requireManifestTag",get:function(){return this._requireManifestTag},set:function(e){this._requireManifestTag=e}},{key:"name",get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this.emit("namechange",{app:this.appData,name:e}))}},{key:"slug",get:function(){return this._slug},set:function(e){this._slug!==e&&(this._slug=e,this.emit("slugchange",{app:this.appData,slug:e}))}},{key:"productName",get:function(){return this._productName},set:function(e){this._productName=e}},{key:"navigator",get:function(){return this._navigator},set:function(e){this._navigator=e}},{key:"window",get:function(){return this._window},set:function(e){this._window=e}},{key:"document",get:function(){return this._document},set:function(e){this._document=e}},{key:"documentURL",get:function(){return this._documentURL},set:function(e){this._documentURL!==e&&(this._documentURL=e,this.emit("documenturlchange",{app:this.appData,documentURL:e}))}},{key:"manifestURL",get:function(){if(this._manifestURL)return this._manifestURL;var e="",n=this._document.querySelector('link[rel~="manifest"]');if(this.requireManifestTag&&!n)throw new Error('Could not find a `link[rel~="manifest"]` tag');return n&&(e=n.href),this._manifestURL=e,e},set:function(e){this._manifestURL!==e&&(this._manifestURL=e,this.emit("documenturlchange",{app:this.appData,manifestURL:e}))}},{key:"fakeManifest",get:function(){return this._fakeManifest},set:function(e){this._fakeManifest=e}},{key:"manifest",get:function(){var e=this._manifest;return this.manifestRefresh(this.manifestURL),e||(e=this._manifest=this.fakeManifest),e},set:function(e){JSON.stringify(this._manifest)!==JSON.stringify(e)&&(this.emit("manifestchange",{app:this.appData,manifest:e}),"name"in e&&(this.name&&this.name===e.name||(this.name=e.name)))}},{key:"appData",get:function(){return{name:this._name,slug:this._slug,manifest:this._manifest,manifestURL:this._manifestURL,documentURL:this._documentURL}}}]),e}();n.default=m,e.exports=n.default},function(e,n,s){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.lookup=void 0;var i=s(4),a=t(i),o=s(0),r=t(o),c=function(e){e=r.default.getExtName(e);for(var n="",s=Object.keys(a.default),t=s.length,i=void 0,o=0;o<t;o++)if((i=a.default[s[o]])&&i.extensions&&i.extensions.indexOf(e)>-1){n=s[o];break}return n};n.lookup=c},function(e,n){e.exports={"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx"]},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tiff","tif"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/webp":{source:"apache",extensions:["webp"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"video/3gpp":{source:"apache",extensions:["3gp","3gpp"]},"video/3gpp2":{source:"apache",extensions:["3g2"]},"video/h261":{source:"apache",extensions:["h261"]},"video/h263":{source:"apache",extensions:["h263"]},"video/h264":{source:"apache",extensions:["h264"]},"video/jpeg":{source:"apache",extensions:["jpgv"]},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"apache",extensions:["mj2","mjp2"]},"video/mp2t":{source:"apache",extensions:["ts"]},"video/mp4":{source:"apache",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mpeg":{source:"apache",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/ogg":{source:"apache",compressible:!1,extensions:["ogv"]},"video/quicktime":{source:"apache",compressible:!1,extensions:["qt","mov"]},"video/vnd.dece.hd":{source:"apache",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"apache",extensions:["uvm","uvvm"]},"video/vnd.dece.pd":{source:"apache",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"apache",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"apache",extensions:["uvv","uvvv"]},"video/vnd.dvb.file":{source:"apache",extensions:["dvb"]},"video/vnd.fvt":{source:"apache",extensions:["fvt"]},"video/vnd.mpegurl":{source:"apache",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"apache",extensions:["pyv"]},"video/vnd.uvvu.mp4":{source:"apache",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"apache",extensions:["viv"]},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"application/manifest+json":{charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js"]}}}])});
//# sourceMappingURL=websdk.min.js.map